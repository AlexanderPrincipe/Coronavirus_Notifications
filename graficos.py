import matplotlib.pyplot as plt

import requests
from bs4 import BeautifulSoup
from plyer import notification
import time

prev_casos = "0"
casosArray = [721019, 721051, 721056, 721224, 721266, 721273, 721277, 721293, 721300, 721312, 721323, 721324, 721330, 721370, 721412, 721503, 721562, 721902, 721903, 721946, 721951, 721956, 740239, 740685, 740695, 740737, 740743, 741774, 741777, 741907, 741908, 741914, 742283, 742339, 742428, 742444, 742462, 742506, 742531, 742556, 743081, 743147, 743179, 743190, 743255, 743286, 743369, 743370, 743402, 743437, 746056, 746062, 746107, 746111, 746112, 746178, 746218, 748066, 748139, 752189, 752241, 752263, 752288, 752297, 752385, 752444, 752678, 752687, 752733, 752747, 752830, 752854, 752861, 753346, 753367, 753385, 759203, 759302, 759321, 759989, 760337, 760383, 760392, 764768, 764866, 764904, 764992, 765039, 765042, 768292, 768363, 768366, 768370, 768466, 768746, 769372, 769426, 769721, 769826, 769952, 770039, 770106, 784742, 784800, 770165, 770293, 771305, 771765, 771797, 771870, 771984, 772009, 772025, 772046, 772226, 774422, 774573, 775370, 775540, 775748, 775782, 775912, 776069, 776089, 776105, 776173, 776179, 776206, 776792, 776814, 779575, 779596, 780174, 780336, 780392, 780506, 780547, 780552, 780559, 780560, 780592, 780597, 780598, 780994, 780997, 781007, 781174, 781210, 781441, 781485, 781754, 781755, 781780, 781836, 781857, 781897, 781951, 781963, 781969, 781979, 782029, 782030, 782034, 782035, 782102, 782103, 782737, 782787, 782851, 783171, 783181, 783277, 783292, 783403, 783476, 783517, 783740, 783760, 783812, 783898, 783910, 783995, 784003, 784006, 784196, 784283]

def graficar():
  global prev_casos

  # Casos confirmados de Coronavirus en el mundo
  res = requests.get('https://www.worldometers.info/coronavirus/').text
  soup = BeautifulSoup(res, 'html.parser')
  soup.encode('utf-8')
  casosint = int((soup.find("div", { "class": "maincounter-number" }).get_text().strip()).replace(',',""))
  
  casosArray.append(casosint)

  ejex = casosArray
  ejey = range(len(ejex))
  plt.plot(ejey, ejex)
  plt.title('Gráfica de infectados')
  plt.ylabel('Número de infectados')
  plt.show()

while True:
    graficar()
    time.sleep(0.001)